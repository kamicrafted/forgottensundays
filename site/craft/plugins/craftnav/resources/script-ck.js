$(document).ready(function(){function n(e,t){var n=confirm("Are you sure you want to delete this? This can not be undone!");n&&(t=="a"?r(e):i(e))}function r(t){$.ajax({type:"POST",data:{id:t},url:"/"+e+"/craftnav/deletenav",success:function(e){$('input[value="'+t+'"]').parents("tr").slideUp()},error:function(e){}})}function i(t){$.ajax({type:"POST",data:{id:t},url:"/"+e+"/craftnav/deleteitem",success:function(e){$('.dd-item[data-id="'+t+'"]').slideUp()},error:function(e){}})}var e=$(location).prop("pathname").split("/")[1];$(".build_page a.settings, .build_page a.link").on("click",function(e){e.preventDefault();$(this).parents("li ol li").length&&$("#form select[name='parent']").val($(this).closest("ol").parent("li").attr("data-id")).prop("selected",!0);$("#form input[name='id']").val($(this).parents(".dd-item").attr("data-id"));$("#form input[name='text']").val($(this).prev("a").text());$("#form input[name='link']").val($(this).prev("a").attr("data"))});$("a.delete").on("click",function(){$(".grid.first").hasClass("build_page")?n($(this).parents(".dd-item").attr("data-id"),"b"):n($(this).next('input[name="id"]').val(),"a")});$("input#name").keyup(function(){var e=$(this).val();e=e.toLowerCase().replace(/[^a-zA-Z 0-9 _]+/g,"");e=e.replace(/ /g,"_");$("input#title").val(e);$(".custom_replace em").text(e)});$("input#title").keyup(function(){var e=$(this).val();e=e.toLowerCase().replace(/[^a-zA-Z 0-9 _]+/g,"");e=e.replace(/ /g,"_");$("input#title").val(e);$(".custom_replace em").text(e)});$(".js-contact").on("click",function(e){e.preventDefault();SnappyWidget.open({contact:!0})});$("#nestable-menu").on("click",function(e){var t=$(e.target),n=t.data("action");n==="expand-all"&&$(".dd").nestable("expandAll");n==="collapse-all"&&$(".dd").nestable("collapseAll")});var t=function(t){var n=t.length?t:$(t.target),r=n.data("output");if(window.JSON){order_data=n.nestable("serialize");$.ajax({type:"POST",data:{data:order_data},url:"/"+e+"/craftnav/ordernav",success:function(e){},error:function(e){}})}};$(".dd").nestable({maxDepth:3}).on("change",t)});